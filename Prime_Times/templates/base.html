{% load tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="https://images.vexels.com/media/users/3/199580/isolated/preview/776be283329a925bc41ad96a41964f4b-united-states-of-america-icon.png">
    <title>{% block title %}Prime Times{% endblock %}</title>
    {% tailwind_css %}
  </head>
  <body>
    <nav class="bg-white border-gray-200 px-4 lg:px-6 pb-1 dark:bg-gray-800">
      <div class="flex flex-wrap justify-between items-center">
        <div class="flex justify-start items-center">
          <button
            aria-expanded="true"
            aria-controls="sidebar"
            class="p-2 mr-2 text-gray-600 rounded-lg cursor-pointer lg:hidden hover:text-gray-900 hover:bg-gray-100 focus:bg-gray-100 dark:focus:bg-gray-700 focus:ring-2 focus:ring-gray-100 dark:focus:ring-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"
          >
            <svg
              class="w-[18px] h-[18px]"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 17 14"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M1 1h15M1 7h15M1 13h15"
              />
            </svg>
            <span class="sr-only">Toggle sidebar</span>
          </button>
          <a href="/" class="flex mr-4">
            <img
              src="https://images.vexels.com/media/users/3/199580/isolated/preview/776be283329a925bc41ad96a41964f4b-united-states-of-america-icon.png"
              class="mr-3 h-15"
              alt="FlowBite Logo"
            />
            <span
              class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white"
              >Prime Times</span
            >
          </a>
        </div>
        <form action="{% url 'home' %}" method="GET" class="hidden lg:block lg:pl-2">
          <label for="topbar-search" class="sr-only">Search</label>
          <div class="relative mt-1 lg:w-96">
            <div
              class="flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"
            >
              <svg
                class="w-4 h-4 text-gray-200 dark:text-gray-200"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 20 20"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
                />
              </svg>
            </div>
            <input
              type="text"
              name="search"
              id="topbar-search"
              value="{{ search_query|default:'' }}"
              class="bg-gray-50 text-gray-900 sm:text-sm rounded-lg block w-full pl-9 p-2.5 dark:bg-gray-700 dark:placeholder-gray-400 dark:text-white"
              placeholder="Search news, authors..."
              autocomplete="off"
            />
            <!-- Search Suggestions (Hidden by default) -->
            <div id="searchSuggestions" class="hidden absolute top-full left-0 right-0 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg mt-1 z-50">
              <div class="p-3 border-b border-gray-200 dark:border-gray-600">
                <p class="text-xs text-gray-500 dark:text-gray-400">Search suggestions:</p>
              </div>
              <div class="p-2">
                <div class="text-sm text-gray-600 dark:text-gray-300 mb-2">
                  <span class="font-medium">Try:</span> news title, author name, or keywords
                </div>
                <div class="text-xs text-gray-500 dark:text-gray-400">
                  Press Enter to search or click outside to close
                </div>
              </div>
            </div>
          </div>
        </form>

        <div class="flex items-center lg:order-2">
          {% if user.is_authenticated %}
            <a href="{% url 'create_news' %}" class="hidden sm:inline-flex items-center justify-center bg-blue-500 text-white bg-primary-700 hover:bg-primary-800 font-medium rounded-lg text-xs px-3 py-2 cursor-pointer mr-2 dark:bg-primary-600 dark:hover:bg-primary-700">
              <svg
                aria-hidden="true"
                class="mr-1 -ml-1 w-5 h-5"
                fill="currentColor"
                viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"
                  clip-rule="evenodd"
                ></path>
              </svg>
              New Report
            </a>
          {% else %}
            <a href="{% url 'login_page' %}" class="hidden sm:inline-flex items-center justify-center bg-blue-500 text-white bg-primary-700 hover:bg-primary-800 font-medium rounded-lg text-xs px-3 py-2 cursor-pointer mr-2 dark:bg-primary-600 dark:hover:bg-primary-700">
              <svg
                aria-hidden="true"
                class="mr-1 -ml-1 w-5 h-5"
                fill="currentColor"
                viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"
                  clip-rule="evenodd"
                ></path>
              </svg>
              Sign In to Report
            </a>
          {% endif %}
          <button
            id="toggleSidebarMobileSearch"
            type="button"
            class="p-2 text-gray-500 rounded-lg lg:hidden hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"
            onclick="toggleMobileSearch()"
          >
            <span class="sr-only">Search</span>
            <!-- Search icon -->
            <svg
              class="w-4 h-4"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 20 20"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
              />
            </svg>
          </button>
          
          <!-- Mobile Search Form (Hidden by default) -->
          <div id="mobileSearchForm" class="hidden lg:hidden absolute top-full left-0 right-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 z-50">
            <form action="{% url 'home' %}" method="GET" class="flex items-center">
              <div class="relative flex-1">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                  </svg>
                </div>
                <input
                  type="text"
                  name="search"
                  value="{{ search_query|default:'' }}"
                  class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400"
                  placeholder="Search news, authors..."
                />
              </div>
              <button
                type="submit"
                class="ml-3 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
              >
                Search
              </button>
              <button
                type="button"
                onclick="toggleMobileSearch()"
                class="ml-2 inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 dark:bg-gray-600 dark:text-gray-300 dark:border-gray-500 dark:hover:bg-gray-700"
              >
                Cancel
              </button>
            </form>
          </div>
          
          <!-- Notifications -->
          <button
            type="button"
            data-dropdown-toggle="notification-dropdown"
            class="p-2 text-gray-500 rounded-lg hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-700 focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600"
          >
            <span class="sr-only">View notifications</span>
            <!-- Bell icon -->
            <svg
              class="w-5 h-5"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="currentColor"
              viewBox="0 0 14 20"
            >
              <path
                d="M12.133 10.632v-1.8A5.406 5.406 0 0 0 7.979 3.57.946.946 0 0 0 8 3.464V1.1a1 1 0 0 0-2 0v2.364a.946.946 0 0 0 .021.106 5.406 5.406 0 0 0-4.154 5.262v1.8C1.867 13.018 0 13.614 0 14.807 0 15.4 0 16 .538 16h12.924C14 16 14 15.4 14 14.807c0-1.193-1.867-1.789-1.867-4.175ZM3.823 17a3.453 3.453 0 0 0 6.354 0H3.823Z"
              />
            </svg>
          </button>
          <!-- Apps -->

          <!-- Dropdown menu -->
          <div
            class="hidden overflow-hidden z-50 my-4 max-w-sm text-base list-none bg-white rounded divide-y divide-gray-100 shadow-lg dark:bg-gray-700 dark:divide-gray-600"
            id="apps-dropdown"
          >
            <div
              class="block py-2 px-4 text-base font-medium text-center text-gray-700 bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
            >
              Apps
            </div>
            <div class="grid grid-cols-3 gap-4 p-4">
              <a
                href="#"
                class="block p-4 text-center rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 group"
              >
                <svg
                  class="mx-auto mb-2 w-5 h-5 text-gray-400 group-hover:text-gray-500 dark:text-gray-400 dark:group-hover:text-gray-400"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 18 20"
                >
                  <path
                    d="M17 5.923A1 1 0 0 0 16 5h-3V4a4 4 0 1 0-8 0v1H2a1 1 0 0 0-1 .923L.086 17.846A2 2 0 0 0 2.08 20h13.84a2 2 0 0 0 1.994-2.153L17 5.923ZM7 9a1 1 0 0 1-2 0V7h2v2Zm0-5a2 2 0 1 1 4 0v1H7V4Zm6 5a1 1 0 1 1-2 0V7h2v2Z"
                  />
                </svg>
                <div class="text-sm font-medium text-gray-900 dark:text-white">
                  Sales
                </div>
              </a>
              <a
                href="#"
                class="block p-4 text-center rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 group"
              >
                <svg
                  class="mx-auto mb-2 w-5 h-5 text-gray-400 group-hover:text-gray-500 dark:text-gray-400 dark:group-hover:text-gray-400"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 20 19"
                >
                  <path
                    d="M14.5 0A3.987 3.987 0 0 0 11 2.1a4.977 4.977 0 0 1 3.9 5.858A3.989 3.989 0 0 0 14.5 0ZM9 13h2a4 4 0 0 1 4 4v2H5v-2a4 4 0 0 1 4-4Z"
                  />
                  <path
                    d="M5 19h10v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2ZM5 7a5.008 5.008 0 0 1 4-4.9 3.988 3.988 0 1 0-3.9 5.859A4.974 4.974 0 0 1 5 7Zm5 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm5-1h-.424a5.016 5.016 0 0 1-1.942 2.232A6.007 6.007 0 0 1 17 17h2a1 1 0 0 0 1-1v-2a5.006 5.006 0 0 0-5-5ZM5.424 9H5a5.006 5.006 0 0 0-5 5v2a1 1 0 0 0 1 1h2a6.007 6.007 0 0 1 4.366-5.768A5.016 5.016 0 0 1 5.424 9Z"
                  />
                </svg>
                <div class="text-sm font-medium text-gray-900 dark:text-white">
                  Users
                </div>
              </a>
              <a
                href="#"
                class="block p-4 text-center rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 group"
              >
                <svg
                  class="mx-auto mb-2 w-5 h-5 text-gray-400 group-hover:text-gray-500 dark:text-gray-400 dark:group-hover:text-gray-400"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 18 18"
                >
                  <path
                    d="M15.977.783A1 1 0 0 0 15 0H3a1 1 0 0 0-.977.783L.2 9h4.239a2.99 2.99 0 0 1 2.742 1.8 1.977 1.977 0 0 0 3.638 0A2.99 2.99 0 0 1 13.561 9H17.8L15.977.783ZM6 2h6a1 1 0 1 1 0 2H6a1 1 0 0 1 0-2Zm7 5H5a1 1 0 0 1 0-2h8a1 1 0 1 1 0 2Z"
                  />
                  <path
                    d="M1 18h16a1 1 0 0 0 1-1v-6h-4.439a.99.99 0 0 0-.908.6 3.978 3.978 0 0 1-7.306 0 .99.99 0 0 0-.908-.6H0v6a1 1 0 0 0 1 1Z"
                  />
                </svg>
                <div class="text-sm font-medium text-gray-900 dark:text-white">
                  Inbox
                </div>
              </a>
              <a
                href="#"
                class="block p-4 text-center rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 group"
              >
                <svg
                  class="mx-auto mb-2 w-5 h-5 text-gray-400 group-hover:text-gray-500 dark:text-gray-400 dark:group-hover:text-gray-400"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    d="M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"
                  />
                </svg>
                <div class="text-sm font-medium text-gray-900 dark:text-white">
                  Profile
                </div>
              </a>
              <a
                href="#"
                class="block p-4 text-center rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 group"
              >
                <svg
                  class="mx-auto mb-2 w-5 h-5 text-gray-400 group-hover:text-gray-500 dark:text-gray-400 dark:group-hover:text-gray-400"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    d="M18 7.5h-.423l-.452-1.09.3-.3a1.5 1.5 0 0 0 0-2.121L16.01 2.575a1.5 1.5 0 0 0-2.121 0l-.3.3-1.089-.452V2A1.5 1.5 0 0 0 11 .5H9A1.5 1.5 0 0 0 7.5 2v.423l-1.09.452-.3-.3a1.5 1.5 0 0 0-2.121 0L2.576 3.99a1.5 1.5 0 0 0 0 2.121l.3.3L2.423 7.5H2A1.5 1.5 0 0 0 .5 9v2A1.5 1.5 0 0 0 2 12.5h.423l.452 1.09-.3.3a1.5 1.5 0 0 0 0 2.121l1.415 1.413a1.5 1.5 0 0 0 2.121 0l.3-.3 1.09.452V18A1.5 1.5 0 0 0 9 19.5h2a1.5 1.5 0 0 0 1.5-1.5v-.423l1.09-.452.3.3a1.5 1.5 0 0 0 2.121 0l1.415-1.414a1.5 1.5 0 0 0 0-2.121l-.3-.3.452-1.09H18a1.5 1.5 0 0 0 1.5-1.5V9A1.5 1.5 0 0 0 18 7.5Zm-8 6a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Z"
                  />
                </svg>
                <div class="text-sm font-medium text-gray-900 dark:text-white">
                  Settings
                </div>
              </a>
              <a
                href="#"
                class="block p-4 text-center rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 group"
              >
                <svg
                  class="mx-auto mb-2 w-5 h-5 text-gray-400 group-hover:text-gray-500 dark:text-gray-400 dark:group-hover:text-gray-400"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 20 16"
                >
                  <path
                    d="M19 0H1a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1ZM2 6v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6H2Zm11 3a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V8a1 1 0 0 1 2 0h2a1 1 0 0 1 2 0v1Z"
                  />
                </svg>
                <div class="text-sm font-medium text-gray-900 dark:text-white">
                  Products
                </div>
              </a>
              <a
                href="#"
                class="block p-4 text-center rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 group"
              >
                <svg
                  class="mx-auto mb-2 w-5 h-5 text-gray-400 group-hover:text-gray-500 dark:text-gray-400 dark:group-hover:text-gray-400"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 11 20"
                >
                  <path
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M1.75 15.363a4.954 4.954 0 0 0 2.638 1.574c2.345.572 4.653-.434 5.155-2.247.502-1.813-1.313-3.79-3.657-4.364-2.344-.574-4.16-2.551-3.658-4.364.502-1.813 2.81-2.818 5.155-2.246A4.97 4.97 0 0 1 10 5.264M6 17.097v1.82m0-17.5v2.138"
                  />
                </svg>
                <div class="text-sm font-medium text-gray-900 dark:text-white">
                  Pricing
                </div>
              </a>
              <a
                href="#"
                class="block p-4 text-center rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 group"
              >
                <svg
                  class="mx-auto mb-2 w-5 h-5 text-gray-400 group-hover:text-gray-500 dark:text-gray-400 dark:group-hover:text-gray-400"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 16 20"
                >
                  <path
                    d="M7 11H5v1h2v-1Zm4 3H9v1h2v-1Zm-4 0H5v1h2v-1ZM5 5V.13a2.98 2.98 0 0 0-1.293.749L.88 3.707A2.98 2.98 0 0 0 .13 5H5Z"
                  />
                  <path
                    d="M14.066 0H7v5a2 2 0 0 1-2 2H0v11a1.97 1.97 0 0 0 1.934 2h12.132A1.97 1.97 0 0 0 16 18V2a1.97 1.97 0 0 0-1.934-2ZM13 16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v6Zm-1-8H9a1 1 0 0 1 0-2h3a1 1 0 1 1 0 2Zm0-3H9a1 1 0 0 1 0-2h3a1 1 0 1 1 0 2Z"
                  />
                  <path d="M11 11H9v1h2v-1Z" />
                </svg>
                <div class="text-sm font-medium text-gray-900 dark:text-white">
                  Billing
                </div>
              </a>
              <a
                href="#"
                class="block p-4 text-center rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 group"
              >
                <svg
                  class="mx-auto mb-2 w-5 h-5 text-gray-400 group-hover:text-gray-500 dark:text-gray-400 dark:group-hover:text-gray-400"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 16 16"
                >
                  <path
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 8h11m0 0-4-4m4 4-4 4m-5 3H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h3"
                  />
                </svg>
                <div class="text-sm font-medium text-gray-900 dark:text-white">
                  Logout
                </div>
              </a>
            </div>
          </div>
          {% if user.is_authenticated %}
            <!-- Profile + Dropdown -->
            <div
              x-data="{ open: false }"
              class="relative inline-block text-left mx-3"
            >
              <!-- Button -->
              <div
                @click="open = !open"
                class="flex items-center bg-gray-700 px-3 py-2 rounded-2xl cursor-pointer"
              >
                <span class="sr-only">Open user menu</span>
                <img
                  class="w-8 h-8 rounded-full"
                  src="https://static.vecteezy.com/system/resources/previews/025/774/874/non_2x/spiderman-logo-red-background-free-vector.jpg"
                  alt="user photo"
                />
                <p class="hidden sm:block text-white px-3">{{ user.username }}</p>
                <!-- Down Arrow Icon -->
                <svg
                  class="w-4 h-4 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </div>

              <!-- Dropdown Menu -->
              <div
                x-show="open"
                @click.away="open = false"
                class="absolute right-0 mt-2 w-40 bg-white rounded-xl shadow-lg py-1 z-20"
              >
                <a
                  href="{% url 'profile' %}"
                  class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                >
                  Profile
                </a>
                <a
                  href="#"
                  class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                >
                  Settings
                </a>
                <a
                  href="{% url 'logout' %}"
                  class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100"
                >
                  Log out
                </a>
              </div>
            </div>
          {% else %}
            <!-- Authentication Links -->
            <div class="flex items-center space-x-3">
              <a href="{% url 'login_page' %}" 
                class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium">
                Sign In
              </a>
              <a href="{% url 'signup_page' %}" 
                class="bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg px-4 py-2 transition">
                Sign Up
              </a>
            </div>
          {% endif %}

          <!-- Alpine.js CDN -->
          <script
            src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
            defer
          ></script>
        </div>
      </div>
    </nav>

    <div class="container mx-auto px-2 py-4 flex justify-center">
      <div class="w-full max-w-7xl">
        {% block content %} Nothing... {% endblock %}
      </div>
    </div>
    
    <!-- Search functionality JavaScript -->
    <script>
      function toggleMobileSearch() {
        const mobileSearchForm = document.getElementById('mobileSearchForm');
        if (mobileSearchForm.classList.contains('hidden')) {
          mobileSearchForm.classList.remove('hidden');
          // Focus on the search input when showing
          const searchInput = mobileSearchForm.querySelector('input[name="search"]');
          if (searchInput) {
            searchInput.focus();
          }
        } else {
          mobileSearchForm.classList.add('hidden');
        }
      }
      
      // Show/hide search suggestions
      function toggleSearchSuggestions(show) {
        const suggestions = document.getElementById('searchSuggestions');
        if (suggestions) {
          if (show) {
            suggestions.classList.remove('hidden');
          } else {
            suggestions.classList.add('hidden');
          }
        }
      }
      
      // Initialize search functionality
      document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.getElementById('topbar-search');
        const mobileSearchInput = document.querySelector('#mobileSearchForm input[name="search"]');
        
        if (searchInput) {
          // Show suggestions on focus
          searchInput.addEventListener('focus', function() {
            toggleSearchSuggestions(true);
          });
          
          // Hide suggestions on blur (with delay to allow clicking)
          searchInput.addEventListener('blur', function() {
            setTimeout(() => toggleSearchSuggestions(false), 200);
          });
          
          // Handle input changes
          searchInput.addEventListener('input', function() {
            if (this.value.trim()) {
              toggleSearchSuggestions(false);
            } else {
              toggleSearchSuggestions(true);
            }
          });
        }
        
        if (mobileSearchInput) {
          // Handle mobile search input changes
          mobileSearchInput.addEventListener('input', function() {
            if (this.value.trim()) {
              // Hide suggestions when typing
              toggleSearchSuggestions(false);
            }
          });
        }
      });
      
      // Close mobile search when clicking outside
      document.addEventListener('click', function(event) {
        const mobileSearchForm = document.getElementById('mobileSearchForm');
        const toggleButton = document.getElementById('toggleSidebarMobileSearch');
        
        if (!mobileSearchForm.contains(event.target) && !toggleButton.contains(event.target)) {
          mobileSearchForm.classList.add('hidden');
        }
        
        // Close search suggestions when clicking outside
        const searchInput = document.getElementById('topbar-search');
        const suggestions = document.getElementById('searchSuggestions');
        if (searchInput && suggestions && !searchInput.contains(event.target) && !suggestions.contains(event.target)) {
          toggleSearchSuggestions(false);
        }
      });
      
      // Handle search form submission with Enter key
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
          const activeElement = document.activeElement;
          if (activeElement && activeElement.name === 'search') {
            const form = activeElement.closest('form');
            if (form) {
              form.submit();
            }
          }
        }
        
        // Hide suggestions on Escape key
        if (event.key === 'Escape') {
          toggleSearchSuggestions(false);
          const mobileSearchForm = document.getElementById('mobileSearchForm');
          if (mobileSearchForm && !mobileSearchForm.classList.contains('hidden')) {
            mobileSearchForm.classList.add('hidden');
          }
        }
      });
    </script>
  </body>
</html>
